{% extends 'base.html' %}
{% block title %}Home{% endblock %}

{% block content %}
<section>
    <div class="max-w-lg mx-auto bg-black text-white p-6 rounded-lg">
    <h1 class="text-3xl font-bold text-center">Welcome <span class="text-orange-500">{{request.user.username}}!</span></h1>
    <p class="text-center mb-6">What do you want to do today?</p>

    <!-- Tabs -->
    <div class="flex border-b border-gray-700">
        <button id="createTab"
            class="flex-1 py-2 bg-orange-500 font-semibold border-b-2 border-orange-500 cursor-pointer">
            Create Room
        </button>
        <button id="joinTab"
            class="flex-1 py-2 bg-black text-white border-b-2 border-transparent cursor-pointer">
            Join Room
        </button>
    </div>

    <!-- Forms Container -->
    <div class="relative mt-4 min-h-[350px]">
        <!-- Create Room Form -->
        <form method="POST">
        {% csrf_token %}
        {{form.as_p}}
        <button type="submit" class="w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700">Create Room</button>
    </form>

        <!-- Join Room Form -->
        {% if room.is_private %}
    <p class="mb-4 text-red-600">This room is private. Enter password to join.</p>
    {% endif %}
    <form method="POST">
        {% csrf_token %}
        {{ form.non_field_errors }}
        {% if room.is_private %}
        {{ form.as_p }}
        {% endif %}
        <button type="submit" class="w-full bg-black text-white py-2 px-4 rounded hover:bg-gray-800">Join Room</button>
    </form>
    </div>
</div>

<script>
    const createTab = document.getElementById('createTab');
    const joinTab = document.getElementById('joinTab');
    const createForm = document.getElementById('createForm');
    const joinForm = document.getElementById('joinForm');

    createTab.addEventListener('click', () => {
        createTab.classList.add('bg-orange-500', 'border-orange-500');
        joinTab.classList.remove('bg-orange-500', 'border-orange-500');
        createForm.classList.remove('hidden');
        joinForm.classList.add('hidden');
    });

    joinTab.addEventListener('click', () => {
        joinTab.classList.add('bg-orange-500', 'border-orange-500');
        createTab.classList.remove('bg-orange-500', 'border-orange-500');
        joinForm.classList.remove('hidden');
        createForm.classList.add('hidden');
    });
</script>


</section>
{% endblock %}